{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Michael\\\\Documents\\\\100devs\\\\workout-react-app\\\\frontend2\\\\src\\\\components\\\\MainFeed.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport MakePost from './MakePost';\nimport '../css/mainfeed.css';\nimport Post from './Post';\nimport { useSelector } from 'react-redux';\nimport userEvent from '@testing-library/user-event';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MainFeed() {\n  _s();\n\n  const {\n    user\n  } = useSelector(state => state.auth); // Post text input value\n\n  const [postInfo, setPostInfo] = React.useState(''); // Array of post objects\n\n  const [postContent, setPostContent] = React.useState([]); // Load posts on page load\n\n  React.useEffect(() => {\n    fetch('/api/posts').then(res => res.json()) // Set post content to an array of post objects\n    .then(data => setPostContent([...data]));\n  }, []); // Set input content to current input value\n\n  function handleInput(e) {\n    setPostInfo(e.target.value);\n  } // On button click\n\n\n  function handlePost(e) {\n    if (!postInfo) {\n      return;\n    }\n\n    const postOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer' + user.token\n      },\n      body: JSON.stringify({\n        content: postInfo\n      })\n    }; // Add new post to posts\n\n    fetch('/api/posts', postOptions).then(res => res.json()).then(data => console.log(data));\n    setPostInfo('');\n  }\n\n  const postElements = postContent.map(post => {\n    return /*#__PURE__*/_jsxDEV(Post, {\n      textContent: post.content\n    }, post._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 16\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"feed\",\n    children: [/*#__PURE__*/_jsxDEV(MakePost, {\n      handlePost: handlePost,\n      handleInput: handleInput,\n      postInfo: postInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), postElements.reverse()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MainFeed, \"hlsPRoSZEm6w1NkhPOUmH3u0UwQ=\", false, function () {\n  return [useSelector];\n});\n\n_c = MainFeed;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainFeed\");","map":{"version":3,"sources":["C:/Users/Michael/Documents/100devs/workout-react-app/frontend2/src/components/MainFeed.js"],"names":["React","MakePost","Post","useSelector","userEvent","MainFeed","user","state","auth","postInfo","setPostInfo","useState","postContent","setPostContent","useEffect","fetch","then","res","json","data","handleInput","e","target","value","handlePost","postOptions","method","headers","token","body","JSON","stringify","content","console","log","postElements","map","post","_id","reverse"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAO,qBAAP;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,SAAP,MAAsB,6BAAtB;;AAEA,eAAe,SAASC,QAAT,GAAoB;AAAA;;AAE/B,QAAM;AAAEC,IAAAA;AAAF,MAAWH,WAAW,CAAEI,KAAD,IAAWA,KAAK,CAACC,IAAlB,CAA5B,CAF+B,CAI/B;;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BV,KAAK,CAACW,QAAN,CAAe,EAAf,CAAhC,CAL+B,CAM/B;;AACA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCb,KAAK,CAACW,QAAN,CAAe,EAAf,CAAtC,CAP+B,CAS/B;;AACAX,EAAAA,KAAK,CAACc,SAAN,CAAgB,MAAM;AAClBC,IAAAA,KAAK,CAAC,YAAD,CAAL,CACKC,IADL,CACUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADjB,EAEI;AAFJ,KAGKF,IAHL,CAGUG,IAAI,IAAIN,cAAc,CAAC,CAAC,GAAGM,IAAJ,CAAD,CAHhC;AAIH,GALD,EAKG,EALH,EAV+B,CAiB/B;;AACA,WAASC,WAAT,CAAqBC,CAArB,EAAwB;AACpBX,IAAAA,WAAW,CAACW,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX;AACH,GApB8B,CAsB/B;;;AACA,WAASC,UAAT,CAAoBH,CAApB,EAAuB;AAEnB,QAAG,CAACZ,QAAJ,EAAc;AACV;AACH;;AAED,UAAMgB,WAAW,GAAG;AAChBC,MAAAA,MAAM,EAAE,MADQ;AAEhBC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,yBAAkB,WAAWrB,IAAI,CAACsB;AAF7B,OAFO;AAMhBC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACC,QAAAA,OAAO,EAAGvB;AAAX,OAAf;AANU,KAApB,CANmB,CAenB;;AACAM,IAAAA,KAAK,CAAC,YAAD,EAAeU,WAAf,CAAL,CACKT,IADL,CACUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADjB,EAEKF,IAFL,CAEUG,IAAI,IAAIc,OAAO,CAACC,GAAR,CAAYf,IAAZ,CAFlB;AAIAT,IAAAA,WAAW,CAAC,EAAD,CAAX;AACH;;AAED,QAAMyB,YAAY,GAAGvB,WAAW,CAACwB,GAAZ,CAAgBC,IAAI,IAAI;AACzC,wBAAO,QAAC,IAAD;AACH,MAAA,WAAW,EAAEA,IAAI,CAACL;AADf,OAEEK,IAAI,CAACC,GAFP;AAAA;AAAA;AAAA;AAAA,YAAP;AAIH,GALoB,CAArB;AAOA,sBACI;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAA,4BACI,QAAC,QAAD;AACI,MAAA,UAAU,EAAGd,UADjB;AAEI,MAAA,WAAW,EAAGJ,WAFlB;AAGI,MAAA,QAAQ,EAAIX;AAHhB;AAAA;AAAA;AAAA;AAAA,YADJ,EAMK0B,YAAY,CAACI,OAAb,EANL;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAkBH;;GAvEuBlC,Q;UAEHF,W;;;KAFGE,Q","sourcesContent":["import React from 'react'\r\nimport MakePost from './MakePost'\r\nimport '../css/mainfeed.css'\r\nimport Post from './Post'\r\nimport { useSelector } from 'react-redux'\r\nimport userEvent from '@testing-library/user-event'\r\n\r\nexport default function MainFeed() {\r\n\r\n    const { user } = useSelector((state) => state.auth)\r\n\r\n    // Post text input value\r\n    const [postInfo, setPostInfo] = React.useState('')\r\n    // Array of post objects\r\n    const [postContent, setPostContent] = React.useState([])\r\n\r\n    // Load posts on page load\r\n    React.useEffect(() => {\r\n        fetch('/api/posts')\r\n            .then(res => res.json())\r\n            // Set post content to an array of post objects\r\n            .then(data => setPostContent([...data]))\r\n    }, [])\r\n\r\n    // Set input content to current input value\r\n    function handleInput(e) {\r\n        setPostInfo(e.target.value)\r\n    }\r\n\r\n    // On button click\r\n    function handlePost(e) {\r\n\r\n        if(!postInfo) {\r\n            return;\r\n        }\r\n\r\n        const postOptions = {\r\n            method: 'POST',\r\n            headers: { \r\n                'Content-Type': 'application/json',\r\n                'Authorization' : 'Bearer' + user.token \r\n            },\r\n            body: JSON.stringify({content : postInfo})\r\n        }\r\n\r\n        // Add new post to posts\r\n        fetch('/api/posts', postOptions)\r\n            .then(res => res.json())\r\n            .then(data => console.log(data))\r\n\r\n        setPostInfo('')\r\n    }\r\n\r\n    const postElements = postContent.map(post => {\r\n        return <Post\r\n            textContent={post.content}\r\n            key={post._id}\r\n        />\r\n    })\r\n\r\n    return (\r\n        <main className='feed'>\r\n            <MakePost \r\n                handlePost= {handlePost}\r\n                handleInput= {handleInput}\r\n                postInfo = {postInfo}\r\n            />\r\n            {postElements.reverse()}\r\n            {/* <Post />\r\n            <Post />\r\n            <Post />\r\n            <Post />\r\n            <Post />\r\n            <Post />\r\n            <Post />\r\n            <Post /> */}\r\n        </main>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}