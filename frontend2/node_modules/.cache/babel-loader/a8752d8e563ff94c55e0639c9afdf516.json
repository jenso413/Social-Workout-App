{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Michael\\\\Documents\\\\100devs\\\\workout-react-app\\\\frontend2\\\\src\\\\components\\\\MainFeed.js\",\n    _s2 = $RefreshSig$();\n\nimport React from 'react';\nimport MakePost from './MakePost';\nimport '../css/mainfeed.css';\nimport Post from './Post';\nimport { useDispatch, useSelector } from 'react-redux';\nimport userEvent from '@testing-library/user-event';\nimport { createPost } from '../redux/postSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MainFeed() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const dispatch = useDispatch();\n  const {\n    user\n  } = useSelector(state => state.auth); // console.log(dispatch)\n  // Post text input value\n\n  const [postInfo, setPostInfo] = React.useState(''); // Array of post objects\n\n  const [allPosts, setAllPosts] = React.useState([]); // Load posts on page load\n\n  _s(React.useEffect(_s(() => {\n    _s();\n\n    fetch('/api/posts', {\n      headers: {\n        Authorization: `Bearer ${user.token}`\n      }\n    }).then(res => res.json()) // Set post content to an array of post objects\n    // .then(data => setAllPosts([...data]))\n    .then(data => data.map(post => dispatch(createPost(post))));\n    const {\n      postsArray\n    } = useSelector(state => state.posts);\n    setAllPosts(postsArray);\n  }, \"fxDoUkzYzCRogn2WziDx21NZIPY=\", false, function () {\n    return [useSelector];\n  }), [dispatch]), \"fxDoUkzYzCRogn2WziDx21NZIPY=\", false, function () {\n    return [useSelector];\n  }); // Set input content to current input value\n\n\n  function handleInput(e) {\n    setPostInfo(e.target.value);\n  } // On button click\n\n\n  function handleClick(e) {\n    dispatch(createPost(postInfo));\n    setPostInfo('');\n  }\n\n  const postElements = allPosts.map(post => {\n    return /*#__PURE__*/_jsxDEV(Post, {\n      textContent: post.content\n    }, post._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 16\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"feed\",\n    children: [/*#__PURE__*/_jsxDEV(MakePost, {\n      handleClick: handleClick,\n      handleInput: handleInput,\n      postInfo: postInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), postElements.reverse()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(MainFeed, \"i1ko4LtU6oAwViNYhRFLPDHAiIo=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = MainFeed;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainFeed\");","map":{"version":3,"sources":["C:/Users/Michael/Documents/100devs/workout-react-app/frontend2/src/components/MainFeed.js"],"names":["React","MakePost","Post","useDispatch","useSelector","userEvent","createPost","MainFeed","dispatch","user","state","auth","postInfo","setPostInfo","useState","allPosts","setAllPosts","useEffect","fetch","headers","Authorization","token","then","res","json","data","map","post","postsArray","posts","handleInput","e","target","value","handleClick","postElements","content","_id","reverse"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAO,qBAAP;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,SAASC,UAAT,QAA2B,oBAA3B;;AAEA,eAAe,SAASC,QAAT,GAAoB;AAAA;;AAAA;;AAE/B,QAAMC,QAAQ,GAAGL,WAAW,EAA5B;AACA,QAAM;AAAEM,IAAAA;AAAF,MAAWL,WAAW,CAAEM,KAAD,IAAWA,KAAK,CAACC,IAAlB,CAA5B,CAH+B,CAI/B;AAEA;;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0Bb,KAAK,CAACc,QAAN,CAAe,EAAf,CAAhC,CAP+B,CAQ/B;;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BhB,KAAK,CAACc,QAAN,CAAe,EAAf,CAAhC,CAT+B,CAW/B;;AACA,KAAAd,KAAK,CAACiB,SAAN,IAAgB,MAAM;AAAA;;AAElBC,IAAAA,KAAK,CAAC,YAAD,EAAe;AAACC,MAAAA,OAAO,EAAE;AAACC,QAAAA,aAAa,EAAG,UAASX,IAAI,CAACY,KAAM;AAArC;AAAV,KAAf,CAAL,CACKC,IADL,CACUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADjB,EAEI;AACA;AAHJ,KAIKF,IAJL,CAIUG,IAAI,IAAIA,IAAI,CAACC,GAAL,CAASC,IAAI,IAAInB,QAAQ,CAACF,UAAU,CAACqB,IAAD,CAAX,CAAzB,CAJlB;AAMA,UAAM;AAAEC,MAAAA;AAAF,QAAiBxB,WAAW,CAACM,KAAK,IAAIA,KAAK,CAACmB,KAAhB,CAAlC;AAEAb,IAAAA,WAAW,CAACY,UAAD,CAAX;AAEH,GAZD;AAAA,YAQ2BxB,WAR3B;AAAA,MAYG,CAACI,QAAD,CAZH;AAAA,YAQ2BJ,WAR3B;AAAA,KAZ+B,CA0B/B;;;AACA,WAAS0B,WAAT,CAAqBC,CAArB,EAAwB;AACpBlB,IAAAA,WAAW,CAACkB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX;AACH,GA7B8B,CA+B/B;;;AACA,WAASC,WAAT,CAAqBH,CAArB,EAAwB;AACpBvB,IAAAA,QAAQ,CAACF,UAAU,CAACM,QAAD,CAAX,CAAR;AACAC,IAAAA,WAAW,CAAC,EAAD,CAAX;AACH;;AAED,QAAMsB,YAAY,GAAGpB,QAAQ,CAACW,GAAT,CAAaC,IAAI,IAAI;AACtC,wBAAO,QAAC,IAAD;AACH,MAAA,WAAW,EAAEA,IAAI,CAACS;AADf,OAEET,IAAI,CAACU,GAFP;AAAA;AAAA;AAAA;AAAA,YAAP;AAIH,GALoB,CAArB;AAOA,sBACI;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAA,4BACI,QAAC,QAAD;AACI,MAAA,WAAW,EAAGH,WADlB;AAEI,MAAA,WAAW,EAAGJ,WAFlB;AAGI,MAAA,QAAQ,EAAIlB;AAHhB;AAAA;AAAA;AAAA;AAAA,YADJ,EAMKuB,YAAY,CAACG,OAAb,EANL;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAUH;;IAtDuB/B,Q;UAEHJ,W,EACAC,W;;;KAHGG,Q","sourcesContent":["import React from 'react'\r\nimport MakePost from './MakePost'\r\nimport '../css/mainfeed.css'\r\nimport Post from './Post'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport userEvent from '@testing-library/user-event'\r\nimport { createPost } from '../redux/postSlice'\r\n\r\nexport default function MainFeed() {\r\n\r\n    const dispatch = useDispatch()\r\n    const { user } = useSelector((state) => state.auth)\r\n    // console.log(dispatch)\r\n\r\n    // Post text input value\r\n    const [postInfo, setPostInfo] = React.useState('')\r\n    // Array of post objects\r\n    const [allPosts, setAllPosts] = React.useState([])\r\n\r\n    // Load posts on page load\r\n    React.useEffect(() => {\r\n\r\n        fetch('/api/posts', {headers: {Authorization: `Bearer ${user.token}`}})\r\n            .then(res => res.json())\r\n            // Set post content to an array of post objects\r\n            // .then(data => setAllPosts([...data]))\r\n            .then(data => data.map(post => dispatch(createPost(post))))\r\n        \r\n        const { postsArray } = useSelector(state => state.posts)\r\n\r\n        setAllPosts(postsArray)\r\n\r\n    }, [dispatch])\r\n\r\n    // Set input content to current input value\r\n    function handleInput(e) {\r\n        setPostInfo(e.target.value)\r\n    }\r\n\r\n    // On button click\r\n    function handleClick(e) {\r\n        dispatch(createPost(postInfo))\r\n        setPostInfo('')\r\n    }\r\n\r\n    const postElements = allPosts.map(post => {\r\n        return <Post\r\n            textContent={post.content}\r\n            key={post._id}\r\n        />\r\n    })\r\n\r\n    return (\r\n        <main className='feed'>\r\n            <MakePost \r\n                handleClick= {handleClick}\r\n                handleInput= {handleInput}\r\n                postInfo = {postInfo}\r\n            />\r\n            {postElements.reverse()}\r\n        </main>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}